@(username: String, balance: Long, betForm: Form[model.BetForm], outcome: entity.BetOutcome)
@implicitFieldConstructor = @{ helper.FieldConstructor(bootstrapInput.render) }

@import helper.form
@import helper.inputPassword
@import helper.inputText

@main("BetPlace Betting") {
    <nav class="navbar navbar-default">
        <div class="navbar-inner">
            <ul class="nav navbar-nav">
                <li><a href="@routes.Application.index()">Logout</a></li>
                <li class="active"><a href="@routes.Application.prepareBet()">Bet</a></li>
                <li><a href="@routes.Application.getHistory(username)">History</a></li>
            </ul>
        </div>
    </nav>

    @if(betForm.hasGlobalErrors) {
        <div class="alert alert-error">
            <strong>Error:</strong> @Messages(betForm.globalError.message)
        </div>
    }

    <div class="alert alert-info">
        @if(outcome == null) {
            Hey @username, you have $@balance. Make a bet to <strong>change</strong> that.
        } else {
            @if(outcome.getWon()) {
                You won! Your prediction of <strong class="text-success">@outcome.getGuess()</strong> was correct. <br/>
            } else {
                You <strong>lost</strong>! You predicted <strong class="text-error">@outcome.getGuess()</strong>, but <strong class="text-success">@outcome.getAnswer()</strong> was observed.

                @if(outcome.getRefilled()) {
                    <br/>
                    Your balance dropped below $@balance, so your account was automatically refilled!}
                    <br/>
            }
            You now have $@balance.
        }
    </div>
    <div>
        <h3> Make a bet </h3>

        @form(action = routes.Application.decideBet(), 'class -> "well form-horizontal", 'autocomplete -> "off") {
            @inputText(betForm("amountString") , '_label -> "Bet Amount (in $)")
            @inputText(betForm("oddsString"), '_label -> "Bet Range")
            @inputText(betForm("guessString"), '_label -> "Prediction")
            <div class="controls">
                <input type="submit" class="btn btn-success" value="Submit Bet"/>
            </div>
        }
    </div>

    <div class="alert alert-info">
        <strong>Betting Rules</strong><br/>
        <ul>
            <li>You win a bet only if you guess the single number randomly generated by the server.</li>
            <li>The generated number is an integer between 1 and your chosen range.</li>
            <li>If you win, you are paid out proportional to your odds ratio, which is computed from your bet range. For example, if you bet with a range of 5, you have a 1:4 betting ratio, so you win 4 times your bet.</li>
            <li>If you lose, you lose only the amount you bet, but you cannot bet more than you have.</li>
            <li>If your balance falls below $1000, it will automatically be refilled up to $1000.
        </ul>
    </div>
}