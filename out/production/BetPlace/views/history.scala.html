@(username: String, bets: List[entity.BetOutcome])
@implicitFieldConstructor = @{ helper.FieldConstructor(bootstrapInput.render) }

@import java.text.SimpleDateFormat;

@main("BetPlace History") {
    <nav class="navbar navbar-default">
        <div class="navbar-inner">
            <ul class="nav navbar-nav">
                <li><a href="@routes.Application.index()">Logout</a></li>
                <li><a href="@routes.Application.prepareBet()">Bet</a></li>
                <li class="active"><a href="@routes.Application.getHistory(username)">History</a></li>
            </ul>
        </div>
    </nav>

    @if(!bets.isEmpty) {
        <div>
            <table class="table">
            <thead>
                <th>Time</th>
                <th>Amount</th>
                <th>Odds</th>
                <th>Predicted Value</th>
                <th>Observed Value</th>
                <th>Balance Before</th>
                <th>Balance After</th>
            </thead>
            <tbody>
            @for(bet <- bets) {
                <tr class="@if(bet.getWon()) {success} else {error}">
                    <td>@bet.getFormattedTime()</td>
                    <td>$@bet.getAmount()</td>
                    <td>1:@(bet.getOdds()-1)</td>
                    <td>@bet.getGuess()</td>
                    <td>@bet.getAnswer()</td>
                    <td>$@bet.getBalanceBefore()</td>
                    <td>$@bet.getBalanceAfter() @if(bet.getRefilled()) { <em class="text-success">(refilled)</em> }</td>
                </tr>
            }
            </tbody>
            </table>
        </div>
    } else {
        <div class="alert alert-error">
            <h3>Could not find history for user @username</h3>
        </div>
    }
}